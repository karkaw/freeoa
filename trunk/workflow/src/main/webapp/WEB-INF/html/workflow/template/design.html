<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns:t>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <!-- Title and other stuffs -->
    <title>模板管理</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="author" content=""/>
    <link href="${res}/formbuild/css/site.css" rel="stylesheet" type="text/css"/>

    <style type="text/css">
        .widget-item {
            float: left;
            width: 92%;
            margin: 6px 4%;
            border: 1px dashed #999;
            padding: 5px 15px;
            cursor: move;
            border-radius: 2px;
            -webkit-transition: background ease-in-out 0.15s;
            -moz-transition: background ease-in-out 0.15s;
            transition: background ease-in-out 0.15s;
            background-color: #f5f5f5;
            position: relative;
            z-index: 100;
        }

        .form-layout{

        }

        .column-layout{
            display: table;
            width: 100%;
            border-width: 1px 0;
            border-style: solid;
            border-color: #7fcdfd;
            position: relative;
            margin: 5px 0;
            background: #ecf9ff;
        }

        .column-layout .cell {
            display: table-cell;
            vertical-align: top;
            height: 51px;
            border: 1px solid #7FCDFD;
        }

         .form-placeholder-filed {
             display:inline-block;
             border:1px dashed #DB4040;
             height:70px !important;
             width: 100%;
        }

    </style>
<#include "/html/head.html"/>
<@head/>
    <script type="text/javascript">
        $(function () {

            $(".nav li ").click(function(e){
                $(".nav .active").removeClass("active");
                $(this).addClass("active");
                $(".span0,.span1").hide();
                $(".span" + $(this).index()).show();
            });

            $(".nav div").each(function (idx, ele) {
                var size =  1 ;
                var type = "" ;
                var X = 0;
                var Y = 0;
                var DX = 0;
                var DY = 0;



                $(ele).bind('mousedown', function () {
                    size = parseInt($(this).attr("col"));
                    var $target = $("#editView .columns_js");

                    var drag = $("<div></div>");
                    var place = $("<div class='form-placeholder-filed'></div>");

                    drag.text($(this).text());
                    drag.appendTo("body");

                    X = $(this).offset().left;
                    Y = $(this).offset().top;

                    var top ;

                    drag.css({ cursor: 'move', position: 'absolute', left: X, top: Y});
                    $(document).bind('mousemove', function (e) {
                        DX = e.pageX;
                        DY = e.pageY;
                        drag.css({ position: 'absolute', left: DX, top: DY});

                        tops = $.grep($target, function(num, index){
                            place.text($(num).position().top)
                            return ($(num).position().top - DY + (place.height()/2)  >0 );
                        });

                        if(tops.length >0){
                            place.insertBefore(tops[0])
                        }else{
                            place.appendTo("#editView");
                        }
                    });
                    $(document).bind('mouseup', function () {
                        var row;
                        if()
                        if(size == 2){
                            row = $("<div class='row column-layout columns_js'><div class='col-sm-6 cell'></div><div class='col-sm-6 cell'></div></div>");
                        }else if(size == 3){
                            row = $("<div class='row column-layout columns_js'><div class='col-sm-4 cell'></div><div class='col-sm-4 cell'></div><div class='col-sm-4 cell'></div></div>");
                        }

                       // row.appendTo("#editView");
                        row.replaceAll(place);
                        drag.remove();
                        $(document).unbind('mousemove');
                        $(document).unbind('mouseup');
                    })
                });

                $("#editView").delegate(".cell","mouseenter",function(){
                    $(this).css({ display:"inline-block",border:"1px dashed #DB4040"})
                });
                $("#editView").delegate(".cell","mouseleave",function(){
                    $(this).css({ display:"",border:"1px solid #7FCDFD"})
                });

            });
        })
    </script>

    <style type='text/css'>

    </style>

</head>

<body>
<!-- Header starts -->
<#include "/html/header.html"/>
<!-- Header ends -->

<!-- Main starts -->
<div class="main-container" id="main-container">
    <div class="main-container-inner">
    <#include "/html/sidebar.html"/>
        <div class="main-content">
            <div>
                <div class="col-sm-2">
                    <nav class="navbar navbar-default" role="navigation">
                        <div>
                            <ul class="nav navbar-nav">
                                <li class="active"><a href="#">布局控件</a></li>
                                <li><a href="#">表单控件</a></li>
                            </ul>
                        </div>
                    </nav>
                    <div class="span0">
                        <ul class="nav nav-list">
                            <div class="widget-item" title="拖拽至页面中间区域" type="layou" col="2">
                                <span class="title">一行两列布局</span>
                                <span class="widgetMark layout-1"></span>
                            </div>
                            <div class="widget-item" title="拖拽至页面中间区域" type="layou" col="3">
                                <span class="title">一行三列布局</span>
                                <span class="widgetMark layout-1"></span>
                            </div>
                            <div class="widget-item" title="拖拽至页面中间区域" type="layou" col="3">
                                <span class="title">一行两列布局</span>
                                <span class="widgetMark layout-1"></span>
                            </div>
                        </ul>
                    </div>
                    <div class="span1" style="display: none">
                        <ul class="nav nav-list">
                            <div class="widget-item" title="拖拽至页面中间区域" type="form">
                                <span class="title">文本框</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" type="layou" componentsize="2">
                                <span class="title">多行文本</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">下拉菜单</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">单选框</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">复选框</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">复选框</span>
                                <span class="widgetMark layout-1"></span>
                            </div>

                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">宏控件</span>
                                <span class="widgetMark layout-1"></span>
                            </div>
                            <div class="widget-item" title="拖拽至页面中间区域" componentkey="ColumnPanel" componentsize="2">
                                <span class="title">列表控件</span>
                                <span class="widgetMark layout-1"></span>
                            </div>
                        </ul>
                    </div>
                </div>
                <div class="col-sm-8 form-layout" id="editView">

                </div>
                <div class="col-sm-2">
1
                </div>
            </div>
        </div>
    </div>
</body>

</html>